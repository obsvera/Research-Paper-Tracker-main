<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quick Test - Research Paper Tracker Fixes</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            max-width: 800px;
            margin: 40px auto;
            padding: 20px;
            background: #f5f5f5;
        }
        .test-card {
            background: white;
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        .test-card h2 {
            margin-top: 0;
            color: #4a90e2;
        }
        .status {
            display: inline-block;
            padding: 4px 12px;
            border-radius: 12px;
            font-size: 14px;
            font-weight: 500;
        }
        .status.pending {
            background: #fff3e0;
            color: #f57c00;
        }
        .status.pass {
            background: #e8f5e9;
            color: #2e7d32;
        }
        .status.fail {
            background: #ffebee;
            color: #c62828;
        }
        button {
            background: #4a90e2;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 14px;
            margin-right: 10px;
            margin-top: 10px;
        }
        button:hover {
            background: #357abd;
        }
        .test-result {
            margin-top: 10px;
            padding: 10px;
            border-radius: 4px;
            font-family: monospace;
            font-size: 12px;
        }
        .test-result.pass {
            background: #e8f5e9;
            color: #2e7d32;
        }
        .test-result.fail {
            background: #ffebee;
            color: #c62828;
        }
        .checklist {
            list-style: none;
            padding: 0;
        }
        .checklist li {
            padding: 8px;
            margin: 4px 0;
            border-left: 3px solid #ddd;
            padding-left: 12px;
        }
        .checklist li.checked {
            border-left-color: #4caf50;
            background: #f1f8f4;
        }
        code {
            background: #f5f5f5;
            padding: 2px 6px;
            border-radius: 3px;
            font-size: 13px;
        }
        .viewport-test {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 10px;
            margin-top: 10px;
        }
        .viewport-box {
            background: #f5f5f5;
            padding: 15px;
            border-radius: 4px;
            text-align: center;
            border: 2px solid #ddd;
        }
        .viewport-box.active {
            border-color: #4a90e2;
            background: #e3f2fd;
        }
        .hero {
            text-align: center;
            margin-bottom: 40px;
        }
        .hero h1 {
            color: #333;
            margin-bottom: 10px;
        }
        .hero p {
            color: #666;
            font-size: 16px;
        }
    </style>
</head>
<body>
    <div class="hero">
        <h1>üß™ Quick Test Suite</h1>
        <p>Verify all fixes are working correctly</p>
    </div>

    <!-- Test 1: BibTeX Import -->
    <div class="test-card">
        <h2>Test 1: BibTeX Import ‚úÖ</h2>
        <p><span class="status pending" id="status-bibtex">Pending</span></p>

        <p><strong>What to test:</strong> BibTeX import should work without errors and import all fields.</p>

        <ol>
            <li>Open the main app: <button onclick="window.open('index.html', '_blank')">Open App</button></li>
            <li>Click "üìö Import BibTeX" button</li>
            <li>Select <code>test-sample.bib</code> file</li>
            <li>Should see: "Successfully imported 4 papers"</li>
            <li>Check that papers have volume, issue, pages populated</li>
        </ol>

        <button onclick="testBibtexStatus()">I Tested This ‚úì</button>

        <div id="bibtex-result"></div>
    </div>

    <!-- Test 2: Memory Leaks -->
    <div class="test-card">
        <h2>Test 2: Memory Leak Fix üß†</h2>
        <p><span class="status pending" id="status-memory">Pending</span></p>

        <p><strong>What to test:</strong> Event listeners should not accumulate after multiple operations.</p>

        <ol>
            <li>Open the app in a new tab</li>
            <li>Open DevTools (F12)</li>
            <li>Add and delete 10 papers, repeat 5 times</li>
            <li>Run in console: <code>getEventListeners(document.getElementById('papersSummary'))</code></li>
            <li>Should see only 1-2 click listeners (not 10+)</li>
        </ol>

        <button onclick="testMemoryStatus()">I Tested This ‚úì</button>

        <div id="memory-result"></div>
    </div>

    <!-- Test 3: Mobile Responsiveness -->
    <div class="test-card">
        <h2>Test 3: Mobile Responsiveness üì±</h2>
        <p><span class="status pending" id="status-mobile">Pending</span></p>

        <p><strong>What to test:</strong> App should work on all screen sizes.</p>

        <div class="viewport-test">
            <div class="viewport-box">
                <strong>375px</strong><br>
                <small>iPhone SE</small>
            </div>
            <div class="viewport-box">
                <strong>390px</strong><br>
                <small>iPhone 12-14</small>
            </div>
            <div class="viewport-box">
                <strong>768px</strong><br>
                <small>iPad</small>
            </div>
            <div class="viewport-box">
                <strong>1024px</strong><br>
                <small>Desktop</small>
            </div>
        </div>

        <p style="margin-top: 15px;"><strong>Quick test:</strong></p>
        <ol>
            <li>Open DevTools (F12) ‚Üí Toggle device toolbar (Ctrl+Shift+M)</li>
            <li>Select "iPhone SE" (375px)</li>
            <li>Verify:
                <ul class="checklist">
                    <li>‚úì All controls stack vertically</li>
                    <li>‚úì Buttons are easy to tap (44px+)</li>
                    <li>‚úì "Swipe to scroll table" hint visible</li>
                    <li>‚úì Paper cards single column</li>
                    <li>‚úì Modals fit on screen</li>
                </ul>
            </li>
        </ol>

        <button onclick="testMobileStatus()">I Tested This ‚úì</button>

        <div id="mobile-result"></div>
    </div>

    <!-- Integration Test -->
    <div class="test-card">
        <h2>Integration Test üéØ</h2>
        <p><span class="status pending" id="status-integration">Pending</span></p>

        <p><strong>Test all fixes together:</strong></p>

        <ol>
            <li>Clear all data in app</li>
            <li>Import <code>test-sample.bib</code> (BibTeX fix)</li>
            <li>Switch to mobile view 375px (Mobile fix)</li>
            <li>Add/delete papers 3 times (Memory fix)</li>
            <li>Everything should work smoothly</li>
        </ol>

        <button onclick="testIntegrationStatus()">I Tested This ‚úì</button>

        <div id="integration-result"></div>
    </div>

    <!-- Current Viewport Info -->
    <div class="test-card">
        <h2>üìè Current Viewport</h2>
        <p>Your current browser window size:</p>
        <div id="viewport-info" style="font-size: 24px; font-weight: bold; color: #4a90e2; text-align: center; padding: 20px;">
            <span id="viewport-width">-</span> √ó <span id="viewport-height">-</span>
        </div>
        <p style="text-align: center; color: #666; font-size: 14px;">
            <span id="viewport-category">-</span>
        </p>
    </div>

    <!-- Summary -->
    <div class="test-card" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white;">
        <h2 style="color: white;">‚ú® Test Summary</h2>
        <div id="summary" style="font-size: 18px; text-align: center; padding: 20px;">
            <div id="summary-text">Complete all tests above to see results</div>
        </div>
    </div>

    <script>
        // Track test status
        let testResults = {
            bibtex: false,
            memory: false,
            mobile: false,
            integration: false
        };

        function testBibtexStatus() {
            testResults.bibtex = true;
            document.getElementById('status-bibtex').className = 'status pass';
            document.getElementById('status-bibtex').textContent = 'Tested ‚úì';
            document.getElementById('bibtex-result').className = 'test-result pass';
            document.getElementById('bibtex-result').textContent = '‚úì BibTeX import test completed';
            updateSummary();
        }

        function testMemoryStatus() {
            testResults.memory = true;
            document.getElementById('status-memory').className = 'status pass';
            document.getElementById('status-memory').textContent = 'Tested ‚úì';
            document.getElementById('memory-result').className = 'test-result pass';
            document.getElementById('memory-result').textContent = '‚úì Memory leak test completed';
            updateSummary();
        }

        function testMobileStatus() {
            testResults.mobile = true;
            document.getElementById('status-mobile').className = 'status pass';
            document.getElementById('status-mobile').textContent = 'Tested ‚úì';
            document.getElementById('mobile-result').className = 'test-result pass';
            document.getElementById('mobile-result').textContent = '‚úì Mobile responsiveness test completed';
            updateSummary();
        }

        function testIntegrationStatus() {
            testResults.integration = true;
            document.getElementById('status-integration').className = 'status pass';
            document.getElementById('status-integration').textContent = 'Tested ‚úì';
            document.getElementById('integration-result').className = 'test-result pass';
            document.getElementById('integration-result').textContent = '‚úì Integration test completed';
            updateSummary();
        }

        function updateSummary() {
            const total = Object.keys(testResults).length;
            const completed = Object.values(testResults).filter(v => v).length;
            const summaryEl = document.getElementById('summary-text');

            if (completed === total) {
                summaryEl.innerHTML = `
                    <div style="font-size: 48px; margin-bottom: 10px;">üéâ</div>
                    <div>All ${total} tests completed!</div>
                    <div style="font-size: 14px; margin-top: 10px; opacity: 0.9;">All fixes are working correctly</div>
                `;
            } else {
                summaryEl.textContent = `${completed} of ${total} tests completed`;
            }
        }

        // Update viewport info
        function updateViewportInfo() {
            const width = window.innerWidth;
            const height = window.innerHeight;

            document.getElementById('viewport-width').textContent = width + 'px';
            document.getElementById('viewport-height').textContent = height + 'px';

            let category = '';
            if (width <= 480) {
                category = 'üì± Mobile Portrait (Small)';
            } else if (width <= 768) {
                category = 'üì± Mobile Landscape / Tablet Portrait';
            } else if (width <= 1024) {
                category = 'üíª Tablet Landscape';
            } else {
                category = 'üñ•Ô∏è Desktop';
            }

            document.getElementById('viewport-category').textContent = category;
        }

        // Update on load and resize
        updateViewportInfo();
        window.addEventListener('resize', updateViewportInfo);

        // Initialize summary
        updateSummary();
    </script>
</body>
</html>
